<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>운정호수 폭우 AR 미션</title>

  <style>
    :root{
      --bg:#0b1020; --panel:rgba(0,0,0,.65); --text:#f5f7ff;
      --red:#ff3b30; --blue:#2f7dff; --ok:#7CFF9A; --bad:#FF7C7C;
    }
    *{box-sizing:border-box}
    body{
      margin:0; overflow:hidden; background:var(--bg); color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
    }

    .stage{position:fixed; inset:0; display:none; align-items:center; justify-content:center}
    .stage.active{display:flex}

    .panel{
      width:min(680px,92vw);
      padding:18px 16px;
      border-radius:18px;
      background:var(--panel);
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.12);
    }

    .warning{border:1px solid rgba(255,59,48,.35)}
    .blink-dot{
      width:10px;height:10px;border-radius:50%;
      background:var(--red);
      box-shadow:0 0 18px rgba(255,59,48,.9);
      animation:blink 1s infinite;
      margin-bottom:10px;
    }
    @keyframes blink{0%,50%{opacity:1}51%,100%{opacity:.15}}
    .warning-title{font-weight:950;letter-spacing:.08em;color:var(--red);font-size:18px}
    .warning-msg{font-size:20px;font-weight:950;margin-top:6px}
    .sub{opacity:.9;margin:10px 0 14px 0;line-height:1.45}

    button{
      width:100%;
      border:0;
      border-radius:999px;
      padding:14px 16px;
      font-size:16px;
      font-weight:900;
      margin-top:10px;
      cursor:pointer;
      touch-action:manipulation;
    }
    .primary{background:rgba(47,125,255,.95);color:#fff}
    .ghost{background:rgba(255,255,255,.10);color:#fff}
    button:disabled{opacity:.45;cursor:not-allowed}

    .footer-hint{
      position:fixed; bottom:14px; left:0; right:0;
      text-align:center; font-size:13px; opacity:.75;
      padding:0 12px;
    }

    /* 카메라 + 오버레이 */
    #cam{
      position:fixed; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      background:#000;
    }
    #rain{
      position:fixed; inset:0;
      width:100%; height:100%;
      pointer-events:none;
    }

    /* (1) 수위 상승 표현 강화: 더 진한 파란 물 + 화면 절반 이상까지 */
    #water{
      position:fixed; left:0; right:0; bottom:0;
      height:0%;
      pointer-events:none;

      /* 진하고 선명한 물 레이어 */
      background:
        radial-gradient(1200px 260px at 50% 0%, rgba(255,255,255,.22), rgba(255,255,255,0) 65%),
        linear-gradient(to top,
          rgba(10,60,255,.92),
          rgba(0,155,255,.78) 55%,
          rgba(0,170,255,.50) 78%,
          rgba(0,170,255,.22) 92%,
          rgba(0,170,255,0) 100%
        );

      /* 물 느낌을 더 강하게 */
      filter: saturate(1.2) contrast(1.1);
      box-shadow: 0 -18px 50px rgba(0,140,255,.35) inset;

      transition:height 6s linear;
    }

    /* 물 표면(상단 가장자리) 라인 + 살짝 출렁임 */
    #water::before{
      content:"";
      position:absolute; left:-10%; right:-10%; top:-18px;
      height:28px;
      background: linear-gradient(to bottom, rgba(255,255,255,.40), rgba(255,255,255,0));
      opacity:.85;
      filter: blur(1px);
      animation: surface 1.2s ease-in-out infinite;
    }
    @keyframes surface{
      0%,100%{transform:translateX(0)}
      50%{transform:translateX(18px)}
    }

    /* (2) 경고 문구는 나중에 등장 + 3배 이상 크게 + 빨간색 */
    #waterText{
      position:absolute;
      left:16px;
      right:16px;
      top:22px;

      font-size:48px;           /* 크게 */
      font-weight:950;
      color:var(--red);         /* 빨간색 */
      letter-spacing:-0.02em;
      line-height:1.1;

      text-shadow:
        0 2px 0 rgba(0,0,0,.55),
        0 10px 24px rgba(0,0,0,.55);

      opacity:0;
      transform: translateY(-10px) scale(0.98);
      transition: opacity 240ms ease, transform 240ms ease;
      pointer-events:none;
    }
    #waterText.show{
      opacity:1;
      transform: translateY(0) scale(1);
    }

    .hud{
      position:fixed; top:12px; left:12px;
      background:rgba(0,0,0,.45);
      border:1px solid rgba(255,255,255,.12);
      border-radius:14px;
      padding:10px 12px;
      backdrop-filter: blur(8px);
    }
    .hud-title{font-weight:950}
    .hud-sub{opacity:.85;margin-top:2px}

    /* 모달 */
    .modal{
      position:fixed; inset:0;
      display:none; align-items:center; justify-content:center;
